<ng-template [ngIf]="anuncios.length" [ngIfElse]="sinAnuncios">
    <!------------------------------Slider para los tiempo de lectura---------------------------------->
    <div class="d-flex justify-content-center">
        <div id="carouselAnuncios" class="carousel slide w-100" data-bs-ride="carousel">
            <div class="carousel-inner">
                <div class="carousel-item p-0 m-0 w-100" *ngFor="let anuncio of anuncios; let i = index" [ngClass]="{'active': i === 1}" [attr.data-bs-interval]="{'2000':(anuncio.tiempoLectura == 'corto'),'5000':(anuncio.tiempoLectura == 'medio'),'10000':(anuncio.tiempoLectura == 'largo')}">
                    <!-- Muestra contenido autiovisual -->
                    <div *ngIf="anuncio.tipoContenido == 'mp4' || anuncio.tipoContenido == 'avi' || anuncio.tipoContenido == 'webm'" class="ratio ratio-16x9">
                        <video allowfullscreen loop controls [controlsList]="'nodownload'" frameborder="0" scrolling="no" width="100%">
                            <source [type]="'video/'+anuncio.tipoContenido" [src]="anuncio.contenido">
                        </video>
                    </div>
                    <!-- Muestra imagenes y gifs -->
                    <div *ngIf="anuncio.tipoContenido == 'jpg' || anuncio.tipoContenido == 'jpeg' || anuncio.tipoContenido == 'png'  || anuncio.tipoContenido == 'gif'" class="w-100 h-100">
                        <img [src]="anuncio.contenido" [alt]="anuncio.titulo+'.'+anuncio.tipoContenido" class="img-fluid w-100">
                    </div>
                    <!-- muestra archivos -->
                    <div *ngIf="anuncio.tipoContenido == 'pdf' || anuncio.tipoContenido == 'html'">
                        <iframe class="w-100" style="height: 50vh;" allowfullscreen controls [src]="contenidos[anuncios.indexOf(anuncio)]" frameborder="0"></iframe>
                    </div>
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselAnuncios" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselAnuncios" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
        </div>
    </div>

    <!------------------------------mostrar anuncios vigentes para sus roles---------------------------------->
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 row-cols-xl-5 row-cols-xxl-6 pt-3 pb-5 mx-0">
        <div class="col my-4 mx-auto shadow-lg rounded-3 card" *ngFor="let a of anuncios">
            <div class="card-header">
                <div *ngIf="a.tipoContenido == 'mp4' || a.tipoContenido == 'avi' || a.tipoContenido == 'webm'" class="ratio ratio-16x9">
                    <video allowfullscreen loop controls [controlsList]="'nodownload'" frameborder="0" scrolling="no">
                        <source [type]="'video/'+a.tipoContenido" [src]="a.contenido">
                    </video>
                </div>
                <div *ngIf="a.tipoContenido == 'jpg' || a.tipoContenido == 'jpeg' || a.tipoContenido == 'png'  || a.tipoContenido == 'gif'">
                    <img [src]="a.contenido" [alt]="a.titulo+'.'+a.tipoContenido" class="w-100 img-fluid">
                </div>
                <div *ngIf="a.tipoContenido == 'pdf' || a.tipoContenido == 'html'">
                    <iframe [src]="contenidos[anuncios.indexOf(a)]" frameborder="0" class="w-100"></iframe>
                </div>
            </div>
            <div class="card-body">
                <h5 class="card-title">{{a.titulo}}</h5>
                <p class="card-text">{{a.redactor.nombre}} {{a.redactor.apellido}}</p>
                <p class="card-text">
                    <ng-container *ngFor="let e of a.estados">
                        <li class="list-group-item" [ngClass]="{'bg-success':e.estado=='autorizado'}">Estado del Anuncio: {{e.estado}}</li>
                    </ng-container>
                </p>
                <!-- Button Modal -->
                <button type="button" class="w-100 btn btn-info mt-3" data-bs-toggle="modal" data-bs-target="#modalRecursos">Recursos <i class="bi bi-archive"></i></button>
            </div>
            <!-- Modal QR -->
            <div class="modal fade" id="modalRecursos" tabindex="-1" aria-labelledby="modalRecursosLabel" aria-hidden="true">
                <div class="modal-dialog modal-md">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="modalRecursosLabel">Recursos de {{a.titulo}}</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body d-flex justify-content-center">
                            <img [src]="a.codigoQR" class="w-50" alt="QR Anuncio">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-danger" data-bs-dismiss="modal">Cerrar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!------------filtrar anuncios historicos para algunos de sus roles---------------------->
    <div class="container-fluid">
        <h2>Filtrar Anuncios Historicos</h2>
        <div class="d-flex">
            <select class="form-select" [(ngModel)]="rolElegido" name="rolElegido">
                <option *ngFor="let r of roles" value={{r._id}}>{{r.nombre}}</option>
            </select>
            <button type="button" class="btn btn-primary" [ngClass]="{'disabled':rolElegido==''}" (click)="filtrarAnuncios()">Filtrar</button>
        </div>
        <div class="row container pt-5 pb-5 mx-0">
            <div class="col-4" *ngFor="let b of anunciosFiltrados" style="width: 18rem;">
                <img class="card-img-top" [src]=b.contenido alt="Card image cap">
                <div class="card-body">
                    <h5 class="card-title">{{b.titulo}}</h5>
                    <p class="card-text">{{b.redactor}}</p>
                    <a href="#" class="btn btn-primary">Tiempo de lectura {{b.tiempoLectura}}</a>
                </div>
            </div>
        </div>
    </div>

</ng-template>


<ng-template #sinAnuncios>
    <div class="sinAnuncios w-100 d-flex justify-content-center align-items-center flex-column">
        <h1>No hay anuncios para mostrar aqui</h1>
    </div>
</ng-template>